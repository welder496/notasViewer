exports.realm = function(realmName) {
  var rname = realmName;
  return function(req, res, next) {
    if (req.header('authorization')) {
      var auth = new Buffer(req.header('authorization').replace('Basic ', ''), 'base64').toString('ascii').split(':');
      req.name = auth[0];
      req.pass = auth[1];
      next();
    } else {
      res.header('WWW-Authenticate', 'Basic realm="' + rname + '"');
      res.sendStatus(401);
    }
  }
}